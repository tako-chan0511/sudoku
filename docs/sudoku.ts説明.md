# types/sudoku.ts èª¬æ˜

types/sudoku.ts ã¯ã“ã®æ•°ç‹¬ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãŠã‘ã‚‹å‹ã®ä¸­å¿ƒçš„å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚Šã€Vue + TypeScriptã®å‹å®‰å…¨æ€§ã‚’å®Ÿç¾ã™ã‚‹åŸºç›¤ã¨ãªã£ã¦ã„ã¾ã™ã€‚  
ä»¥ä¸‹ã«ä¸»ãªå‹æ§‹é€ ã¨ãã®åˆ©ç‚¹ã‚’è§£èª¬ã—ã¾ã™ã€‚

## âœ… æ¦‚è¦

ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ã€æ•°ç‹¬ã®çŠ¶æ…‹ã‚’æ§‹æˆã™ã‚‹ãŸã‚ã®ä»¥ä¸‹ã®å‹ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼š

| ã‚«ãƒ†ã‚´ãƒª | å‹å | ä¸»ãªç”¨é€” |
| --- | --- | --- |
| ã‚»ãƒ«ã¨ç›¤é¢æ§‹é€  | Cell, Board | å„ãƒã‚¹ã‚„ç›¤é¢å…¨ä½“ã®çŠ¶æ…‹ç®¡ç† |
| å…¥åŠ›ãƒ»å€™è£œ | Candidates, CandidateNumber, InputMode, SudokuValue | ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ»å€™è£œç®¡ç†ã®è£œåŠ© |
| ä¿å­˜æ©Ÿèƒ½ | SavedCellData, SavedPuzzle | LocalStorage ã¸ã®æ°¸ç¶šåŒ–ã«ä½¿ç”¨ |

---

## ğŸ“¦ å„å‹ã®è©³ç´°

### 1. Candidateså‹ï¼šå€™è£œç®¡ç†ãƒãƒƒãƒ—

```ts
export type Candidates = {
  1: boolean; 2: boolean; ... 9: boolean;
}
```
- 1ã€œ9ã®å„æ•°å­—ã«å¯¾ã—ã¦ã€Œå€™è£œã«å«ã¾ã‚Œã‚‹ã‹ã©ã†ã‹ã€ã‚’ boolean ã§ç®¡ç†  
- cell.candidates, cell.userCandidates ã®å½¢ã§ä½¿ç”¨  
- Record<CandidateNumber, boolean> ã®å…·ä½“å±•é–‹

**âœ… åˆ©ç‚¹ï¼š**
- 1ã€œ9ã®å€™è£œã‚’å®šä½ç½®ã§ç®¡ç†ã§ãã‚‹ãŸã‚ã€UIæç”»ï¼ˆã‚°ãƒªãƒƒãƒ‰è¡¨ç¤ºï¼‰ã¨è¦ªå’Œæ€§ãŒé«˜ã„
- booleanã§åˆ‡ã‚Šæ›¿ãˆå¯èƒ½ãªãŸã‚ã€ãƒˆã‚°ãƒ«å‡¦ç†ãŒç›´æ„Ÿçš„ã«æ›¸ã‘ã‚‹

---

### 2. Cellå‹ï¼šç›¤é¢ã®1ãƒã‚¹ã‚’è¡¨ã™æ§‹é€ ä½“

```ts
export interface Cell {
  row: number;
  col: number;
  value: 0 | 1ã€œ9;
  isGiven: boolean;
  candidates: Candidates;
  userCandidates: Candidates;
}
```
- value: ç¢ºå®šã—ãŸå€¤ï¼ˆ0ã¯ç©ºï¼‰
- isGiven: åˆæœŸå•é¡Œã§ä¸ãˆã‚‰ã‚ŒãŸæ•°å­—ï¼ˆtrueãªã‚‰ç·¨é›†ä¸å¯ï¼‰
- candidates: è‡ªå‹•ç”Ÿæˆã•ã‚ŒãŸå€™è£œï¼ˆå†…éƒ¨ãƒ­ã‚¸ãƒƒã‚¯ç”¨ï¼‰
- userCandidates: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰‹å‹•å…¥åŠ›ã—ãŸå€™è£œï¼ˆthinkingãƒ¢ãƒ¼ãƒ‰ç”¨ï¼‰

**âœ… åˆ©ç‚¹ï¼š**
- å€™è£œã‚„é¸æŠçŠ¶æ…‹ã‚’1ã¤ã®ã‚»ãƒ«ã§å®Œçµã—ã¦ç®¡ç†ã§ãã‚‹
- é–¢é€£ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè¡¨ç¤ºã€å…¥åŠ›ã€æ¤œè¨¼ï¼‰ã‚’å˜ç´”åŒ–ã§ãã‚‹

---

### 3. Boardå‹ï¼š9Ã—9ã®ç›¤é¢ï¼ˆCellã®2æ¬¡å…ƒé…åˆ—ï¼‰

```ts
export type Board = Cell[][];
```
- æ•°ç‹¬ç›¤é¢ã‚’ Cell ã®9è¡ŒÃ—9åˆ—ã®é…åˆ—ã§ç®¡ç†

**âœ… åˆ©ç‚¹ï¼š**
- ç›¤é¢ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆè¡Œãƒ»åˆ—ãƒ»ãƒ–ãƒ­ãƒƒã‚¯ãƒã‚§ãƒƒã‚¯ï¼‰ã‚’ç›´æ„Ÿçš„ã«æ›¸ã‘ã‚‹
- flatCells ã¯ã“ã“ã‹ã‚‰ãƒ•ãƒ©ãƒƒãƒˆåŒ–ã•ã‚Œã¦æç”»ç”¨ã«å±•é–‹ã•ã‚Œã¦ã„ã‚‹

---

### 4. InputModeå‹ï¼šå…¥åŠ›ãƒ¢ãƒ¼ãƒ‰ã‚’åˆ¶é™

```ts
export type InputMode = 'confirm' | 'thinking';
```
- 'confirm': ç¢ºå®šæ•°å­—å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰
- 'thinking': å€™è£œï¼ˆãƒ¡ãƒ¢ï¼‰å…¥åŠ›ãƒ¢ãƒ¼ãƒ‰

**âœ… åˆ©ç‚¹ï¼š**
- å€¤åˆ¶é™ã«ã‚ˆã‚Šãƒã‚°é˜²æ­¢
- ã‚¹ã‚¿ã‚¤ãƒ«å¤‰æ›´ãƒ»ã‚¯ãƒªãƒƒã‚¯åˆ¶å¾¡ã«ä½¿ã„ã‚„ã™ã„

---

### 5. CandidateNumber, SudokuValueå‹

```ts
export type CandidateNumber = 1 | 2 | ... | 9;
export type SudokuValue = 0 | 1 | ... | 9;
```
- å‹å®‰å…¨ãªæ•°å­—åˆ¶é™ï¼ˆ1ã€œ9ã®ã¿ã€0ã¯ç©ºç™½ï¼‰

**âœ… åˆ©ç‚¹ï¼š**
- èª¤ã£ã¦10ã‚„-1ãªã©ã®å€¤ãŒå…¥ã‚Šè¾¼ã‚€ã“ã¨ã‚’é˜²ã’ã‚‹
- forEach((n: CandidateNumber) => ...) ã®ã‚ˆã†ã«æ˜ç¢ºã«åˆ¶é™ã§ãã‚‹

---

### 6. SavedCellDataå‹ï¼šä¿å­˜æ™‚ã®1ãƒã‚¹ãƒ‡ãƒ¼ã‚¿

```ts
export interface SavedCellData {
  value: Cell['value'];
  isGiven: Cell['isGiven'];
  userCandidates: CandidateNumber[];
}
```
- row/col ã‚„ candidatesï¼ˆè‡ªå‹•å€™è£œï¼‰ã¯é™¤å¤–
- userCandidates ã¯ booleanãƒãƒƒãƒ—ã‹ã‚‰é…åˆ—ã¸å¤‰æ›ã•ã‚Œã‚‹ï¼ˆåœ§ç¸®ä¿å­˜ï¼‰

**âœ… åˆ©ç‚¹ï¼š**
- ä¿å­˜ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã‚’å°ã•ãã€ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ç°¡å˜ã«
- èª­ã¿è¾¼ã¿æ™‚ã« Candidates ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¸é€†å¤‰æ›å¯èƒ½

---

### 7. SavedPuzzleå‹ï¼š1ä»¶ã®ä¿å­˜ãƒ‘ã‚ºãƒ«æƒ…å ±

```ts
export interface SavedPuzzle {
  id: string;
  name: string;
  timestamp: number;
  boardData: SavedCellData[][];
  difficulty: "easy" | "medium" | "hard";
}
```
- UUIDã§ä¸€æ„è­˜åˆ¥
- ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨é›£æ˜“åº¦ã€ä¿å­˜æ™‚åˆ»
- SavedCellData[][] ã§æ§‹æˆã•ã‚ŒãŸç›¤é¢æƒ…å ±

**âœ… åˆ©ç‚¹ï¼š**
- LocalStorageä¿å­˜ãƒ»å±¥æ­´è¡¨ç¤ºãƒ»ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½ã«å¿…è¦ãªæƒ…å ±ã‚’ã™ã¹ã¦ç¶²ç¾…
- ã‚½ãƒ¼ãƒˆï¼ˆtimestampï¼‰ã‚„ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆé›£æ˜“åº¦ï¼‰ã‚‚å®¹æ˜“ã«è¡Œãˆã‚‹

---

## ğŸ§  è£œè¶³ã¨è©•ä¾¡

ã“ã®å‹å®šç¾©ã¯ã™ã¹ã¦ é™çš„å‹ä»˜ã‘ã‚’é€šã˜ãŸã‚¨ãƒ©ãƒ¼é˜²æ­¢ã¨ä¿å®ˆæ€§ã®å‘ä¸Šã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚  
ã¨ãã« Candidates ã®booleanãƒãƒƒãƒ—ã¨ CandidateNumber å‹ã®å°å…¥ã¯ã€æ•°ç‹¬ã‚¢ãƒ—ãƒªã«ç‰¹åŒ–ã—ãŸå …ç‰¢ãªè¨­è¨ˆã§ã™ã€‚

Vue 3 + TypeScript ã®é–‹ç™ºã«ãŠã„ã¦ã€Props/Emits/Stateã®å‹å®‰å…¨æ€§ã‚’é«˜ã‚ã‚‹ã“ã¨ã§ã€é–‹ç™ºä½“é¨“ãƒ»UXã®ä¸¡é¢ã§å“è³ªå‘ä¸Šã«è²¢çŒ®ã—ã¦ã„ã¾ã™ã€‚

---

## âœ… ã¾ã¨ã‚ï¼šå‹æ§‹é€ å…¨ä½“å›³

```yaml
[Cell] â”€â”¬â”€ value: SudokuValue (0ã€œ9)
        â”œâ”€ isGiven: boolean
        â”œâ”€ candidates: Candidates (auto)
        â””â”€ userCandidates: Candidates (manual)

[Board] = Cell[][] (9Ã—9)

[SavedPuzzle] â”€â”¬â”€ id, name, timestamp
               â”œâ”€ difficulty: 'easy' | ...
               â””â”€ boardData: SavedCellData[][]

[SavedCellData] = Cellã‹ã‚‰row/colé™¤å¤– + userCandidatesã¯é…åˆ—åŒ–
```

ã“ã‚Œã«ã‚ˆã‚Š App.vue, SudokuCell.vue, CandidateGrid.vue ã®ã™ã¹ã¦ã®æ§‹é€ ãŒã¤ãªãŒã‚Šã€å‹ã®ä¸€è²«æ€§ã«ã‚ˆã‚Šé«˜å“è³ªãªæ•°ç‹¬ã‚¢ãƒ—ãƒªãŒæˆç«‹ã—ã¦ã„ã‚‹ã“ã¨ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚
